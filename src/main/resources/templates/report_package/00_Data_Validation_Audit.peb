<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Data Validation Audit: Case and Staffing Data Integrity</title>
    <style>
        body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; line-height: 1.6; color: #333; max-width: 900px; margin: 0 auto; padding: 40px; background-color: #f4f7f6; }
        .container { background-color: #fff; padding: 60px; border-radius: 8px; box-shadow: 0 4px 6px rgba(0,0,0,0.1); }
        h1 { color: #2c3e50; border-bottom: 2px solid #3498db; padding-bottom: 10px; text-transform: uppercase; }
        h2 { color: #2980b9; margin-top: 40px; border-left: 5px solid #3498db; padding-left: 15px; }
        .stats-grid { display: grid; grid-cols: 1 md:grid-cols-3 gap: 20px; margin: 20px 0; }
        .stat-card { background: #f9f9f9; padding: 20px; border-radius: 8px; border: 1px solid #ddd; text-align: center; }
        .stat-value { font-size: 1.5rem; font-weight: bold; color: #2c3e50; }
        .stat-label { font-size: 0.8rem; color: #7f8c8d; text-transform: uppercase; }
        table { width: 100%; border-collapse: collapse; margin-top: 20px; }
        th, td { border: 1px solid #ddd; padding: 12px; text-align: left; }
        th { background-color: #f2f2f2; }
        .warning { color: #e67e22; font-weight: bold; }
        .success { color: #27ae60; font-weight: bold; }
        .footer { margin-top: 60px; text-align: center; color: #95a5a6; font-size: 0.8rem; border-top: 1px solid #eee; padding-top: 20px; }
    </style>
</head>
<body>
    <div class="container">
        <h1>Data Validation Audit</h1>
        <p>This report provides full transparency into the data quality of the raw exports provided for this audit. Before optimization algorithms are applied, all records undergo a multi-pass validation check to ensure clinical safety and mathematical accuracy.</p>

        <h2>1. Surgical Case Data Validation</h2>
        {% if caseValidation is not null %}
        <div class="stats-grid" style="display: flex; justify-content: space-between;">
            <div class="stat-card" style="flex: 1; margin: 0 10px;">
                <div class="stat-value">{{ caseValidation.getTotalRowsRead() | numberformat("#,###") }}</div>
                <div class="stat-label">Total Records Read</div>
            </div>
            <div class="stat-card" style="flex: 1; margin: 0 10px;">
                <div class="stat-value success">{{ caseValidation.getTotalValidRows() | numberformat("#,###") }}</div>
                <div class="stat-label">Accepted Records</div>
            </div>
            <div class="stat-card" style="flex: 1; margin: 0 10px;">
                <div class="stat-value warning">{{ caseValidation.getTotalErrorRows() | numberformat("#,###") }}</div>
                <div class="stat-label">Excluded Records</div>
            </div>
        </div>

        <h3>Case Exclusion Reasons</h3>
        <table>
            <thead>
                <tr>
                    <th>Reason for Exclusion</th>
                    <th>Count</th>
                </tr>
            </thead>
            <tbody>
                {% for entry in caseValidation.getSkipReasons() %}
                <tr>
                    <td>{{ entry.key }}</td>
                    <td>{{ entry.value | numberformat("#,###") }}</td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
        {% else %}
        <p>No surgical case validation data available.</p>
        {% endif %}

        <h2>2. CRNA Staffing Data Validation</h2>
        {% if crnaValidation is not null %}
        <div class="stats-grid" style="display: flex; justify-content: space-between;">
            <div class="stat-card" style="flex: 1; margin: 0 10px;">
                <div class="stat-value">{{ crnaValidation.getTotalRowsRead() | numberformat("#,###") }}</div>
                <div class="stat-label">Total Records Read</div>
            </div>
            <div class="stat-card" style="flex: 1; margin: 0 10px;">
                <div class="stat-value success">{{ crnaValidation.getTotalValidRows() | numberformat("#,###") }}</div>
                <div class="stat-label">Accepted Records</div>
            </div>
            <div class="stat-card" style="flex: 1; margin: 0 10px;">
                <div class="stat-value warning">{{ crnaValidation.getTotalErrorRows() | numberformat("#,###") }}</div>
                <div class="stat-label">Excluded Records</div>
            </div>
        </div>

        <h3>Staffing Exclusion Reasons</h3>
        <table>
            <thead>
                <tr>
                    <th>Reason for Exclusion</th>
                    <th>Count</th>
                </tr>
            </thead>
            <tbody>
                {% for entry in crnaValidation.getSkipReasons() %}
                <tr>
                    <td>{{ entry.key }}</td>
                    <td>{{ entry.value | numberformat("#,###") }}</td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
        {% else %}
        <p>No CRNA staffing validation data available or provided.</p>
        {% endif %}

        <h2>3. Validation Methodology</h2>
        <p>Our validation engine enforces the following constraints to protect audit integrity:</p>
        <ul>
            <li><strong>Temporal Consistency:</strong> Records where the anesthesia end time precedes the start time are automatically excluded.</li>
            <li><strong>Duration Outliers:</strong> Procedures less than {{ minProcedureDurationMinutes }} minutes or greater than {{ maxProcedureDurationHours }} hours are flagged as potential data entry errors and excluded.</li>
            <li><strong>Identity Integrity:</strong> Missing Case IDs or anonymous provider names (e.g., "{{ skipRowProviderName }}") are filtered to ensure all identified savings are attributed to specific, traceable case volume.</li>
        </ul>

        <div class="footer">
            <p><a href="../Executive_ROI_Report.html" style="color: #ffffff; text-decoration: underline;">&larr; Return to Executive ROI Report</a></p>
            HEalLTHCaiRE.ai | smAIrtRx Data Integrity Engine | CONFIDENTIAL
        </div>
    </div>
</body>
</html>